AngularJS でアプリケーションを構築する時最初に必要になるのがモジュールです。

モジュールはアプリケーションが必要としているパーツの情報を持ったオブジェクトです。

AngularJS ではアプリケーションに必要な機能は全てモジュールのメソッドを使って定義します。

## 作る
モジュールを作成するには angular.module メソッドを使用します。

```javascript
var app = angular.module('App', []);
```

第一引数はアプリケーションの名前です。
第二引数の配列には作成するモジュールが依存している外部モジュールの名前を列挙します。
依存するモジュールがひとつも存在しない場合でも第二引数を省略することは出来ません。
modelu メソッドは第二引数が省略されると作成済みモジュールを取得するゲッターとして機能します。

## 使う
AngularJS は DOM の準備が終わる(DOMContentLoaded)と ng-app 属性を持った要素を探し出し属性値で指定されたモジュールをロードしてアプリケーションを開始します。

```html
<body ng-app="App">
</body>
```

## モジュールの依存解決
モジュールは別のモジュールに定義された機能を利用することが出来ます。
以下の例では App モジュールは自身に定義された機能以外に Sub モジュールに定義された機能も使用することが出来ます。

```javascript
// sub.js
angular.module('Sub', []);
```
```javascript
// app.js
angular.module('App', ['Sub']);
```

上記のコードではモジュールは別々のファイルに記述されています。
この時 sub.js は app.js より先に読み込まれている**必要がありません**。
どちらが先に読み込まれても正しく動作します。

モジュールの依存解決はファイルがロードされた時ではなく、モジュールがロードされるときに行われます。

## モジュールの設定を変更する
モジュールで使用するアプリケーション共通の機能(サービス)の設定を変更するためには config メソッドを使用します。

```javascript
angular.module('App', [])
.config(['$interpolateProvider', '$locationProvider', function ($interpolateProvider, $locationProvider) {
  // テンプレート構文を // ~ // に変更
  $interpolateProvider.startSymbol('//').endSymbol('//');

  // $location サービスの振る舞いを History API を使用するものに変更
  $locationProvider.html5Mode(true);
}]);
```

config メソッドはアノテーション配列を受け取ります。
設定関数はモジュールがロードされたときに実行されます。実行タイミングはサービスが初期化されるよりも前であることに注意してください。

<div class="alert alert-info">
**Tip:**
アノテーション配列については<a href="#/guide/dependence" class="alert-link">依存関係の注釈付け</a>で説明しています。
</div>


## モジュールにスタートアップ処理を与える
モジュールのロード完了直後に実行する必要がある処理を作成するには run メソッドを使用します。

```javascript
angular.module('App', [])
.run(['$rootScope', function (scope) {
  scope.$on('notification', function (evt, text) {
    // ...
  });
}]);
```
run メソッドはアノテーション配列を受け取ります。
関数はモジュールがロードされ設定処理が終わった直後に実行されます。
config メソッドと違い関数はサービスを受け取ることができます。

## モジュールに機能を定義する
モジュールにコントローラやサービスを定義する方法は各ガイドを参照してください。

## モジュールの作成からアプリケーション開始までの流れ
1. js ファイルがロードされます。
2. angular.module でモジュールが作成されます。
3. module オブジェクトのメソッドで機能が定義されます。
   この時点では引数として渡した関数は全て実行されません。
4. DOMContentLoaded のタイミングで フレームワークが ng-app 属性を持った要素を探します。
5. 要素が見つかったら指定モジュールの依存を解決します。
6. モジュールの設定関数が(あれば)実行されます。
7. モジュールのスタートアップ関数が(あれば)実行されます。
8. モジュールの情報を元にディレクティブが呼び出されます。
